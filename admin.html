<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ares Anime ‚Äì Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">

  <style>
    body {
      background: #0a0f1f;
      color: white;
      padding: 20px;
    }
    .admin-box {
      background: rgba(255,255,255,0.06);
      padding: 20px;
      border-radius: 14px;
      margin-bottom: 30px;
    }
    .admin-input, select {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      margin-bottom: 14px;
      border-radius: 10px;
      border: none;
      outline: none;
    }
    .btn {
      padding: 10px 20px;
      background: #4a6bff;
      border-radius: 10px;
      border: none;
      color: white;
      cursor: pointer;
      margin-top: 10px;
    }
    .btn:hover {
      opacity: 0.85;
    }
    .server-row {
      background: rgba(255,255,255,0.05);
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 10px;
    }
  </style>
</head>

<body id="admin" data-page="admin">

<h1>üîê Ares Anime ‚Äì Admin Panel</h1>
<p>Only you can access this page.</p>

<hr><br>

<!-- SECRET KEY CHECK -->
<div id="admin-locked" style="display:none; text-align:center; margin-top:40px;">
  <h2>Access Denied ‚ùå</h2>
  <p>Incorrect or missing admin key.</p>
</div>

<div id="admin-panel">

  <!-- ADD ANIME -->
  <div class="admin-box">
    <h2>‚ûï Add Anime</h2>

    <input id="anime-title" class="admin-input" placeholder="Anime Title" />
    <input id="anime-id" class="admin-input" placeholder="Anime ID (unique)" />
    <input id="anime-poster" class="admin-input" placeholder="Poster URL" />

    <textarea id="anime-description" class="admin-input" placeholder="Description"></textarea>

    <button class="btn" onclick="addAnime()">Save Anime</button>
  </div>

  <!-- ADD SEASON -->
  <div class="admin-box">
    <h2>üìÅ Add Season</h2>

    <select id="season-anime-select" class="admin-input"></select>
    <input id="season-name" class="admin-input" placeholder="Season Name (ex: Season 1)" />

    <button class="btn" onclick="addSeason()">Add Season</button>
  </div>

  <!-- ADD EPISODE -->
  <div class="admin-box">
    <h2>üé¨ Add Episode</h2>

    <select id="episode-anime-select" class="admin-input"></select>
    <select id="episode-season-select" class="admin-input"></select>

    <input id="ep-number" type="number" class="admin-input" placeholder="Episode Number" />
    <input id="ep-title" class="admin-input" placeholder="Episode Title" />

    <h3>Streaming Servers</h3>

    <div id="stream-list">
      <div class="server-row">
        <label>Filemoon URL</label>
        <input id="stream-filemoon" class="admin-input" placeholder="https://filemoon.com/e/...">
      </div>

      <div class="server-row">
        <label>StreamTape URL</label>
        <input id="stream-streamtape" class="admin-input" placeholder="https://streamtape.com/e/...">
      </div>

      <div class="server-row">
        <label>StreamGH URL</label>
        <input id="stream-streamgh" class="admin-input" placeholder="https://streamgh.com/e/...">
      </div>
    </div>

    <h3>Download Servers</h3>

    <div class="server-row">
      <label>Filemoon DL</label>
      <input id="dl-filemoon" class="admin-input" placeholder="https://filemoon.to/d/...">
    </div>

    <div class="server-row">
      <label>StreamGH DL</label>
      <input id="dl-streamgh" class="admin-input" placeholder="https://streamgh.com/d/...">
    </div>

    <button class="btn" onclick="addEpisode()">Add Episode</button>
  </div>

  <!-- SAVE TO GITHUB -->
  <div class="admin-box">
    <h2>üßæ Save All Changes</h2>
    <button class="btn" onclick="saveToGitHub()">Save to GitHub & Auto Deploy</button>
  </div>

</div>

<script src="script.js"></script>

<script>
/* ---------------------------
   ADMIN PAGE PROTECTION
---------------------------- */
const url = new URLSearchParams(window.location.search);
const key = url.get("key");

// YOUR SECRET KEY (Set any password you want)
const ADMIN_KEY = "ARES2025";

if (key !== ADMIN_KEY) {
  document.getElementById("admin-panel").style.display = "none";
  document.getElementById("admin-locked").style.display = "block";
}

/* ---------------------------
   ADMIN FUNCTIONS
---------------------------- */

function refreshAnimeDropdowns() {
  const seasonAnime = document.getElementById("season-anime-select");
  const epAnime = document.getElementById("episode-anime-select");

  seasonAnime.innerHTML = "";
  epAnime.innerHTML = "";

  animeList.forEach(a => {
    seasonAnime.innerHTML += `<option value="${a.id}">${a.title}</option>`;
    epAnime.innerHTML += `<option value="${a.id}">${a.title}</option>`;
  });

  refreshSeasonDropdown();
}

function refreshSeasonDropdown() {
  const animeId = document.getElementById("episode-anime-select").value;
  const seasonList = document.getElementById("episode-season-select");
  seasonList.innerHTML = "";

  const anime = animeList.find(a => a.id === animeId);
  anime.seasons.forEach((s, i) => {
    seasonList.innerHTML += `<option value="${i}">${s.name}</option>`;
  });
}

function addAnime() {
  let obj = {
    id: document.getElementById("anime-id").value,
    title: document.getElementById("anime-title").value,
    poster: document.getElementById("anime-poster").value,
    description: document.getElementById("anime-description").value,
    popularity: 1,
    trending: 1,
    updated: Date.now(),
    seasons: []
  };

  animeList.push(obj);
  alert("Anime added!");
  refreshAnimeDropdowns();
}

function addSeason() {
  const animeId = document.getElementById("season-anime-select").value;
  const anime = animeList.find(a => a.id === animeId);

  anime.seasons.push({
    name: document.getElementById("season-name").value,
    episodes: []
  });

  alert("Season added!");
  refreshSeasonDropdown();
}

function addEpisode() {
  const animeId = document.getElementById("episode-anime-select").value;
  const seasonIndex = parseInt(document.getElementById("episode-season-select").value);

  const anime = animeList.find(a => a.id === animeId);

  anime.seasons[seasonIndex].episodes.push({
    number: parseInt(document.getElementById("ep-number").value),
    title: document.getElementById("ep-title").value,

    watch_servers: [
      { name: "Filemoon", url: document.getElementById("stream-filemoon").value },
      { name: "StreamTape", url: document.getElementById("stream-streamtape").value },
      { name: "StreamGH", url: document.getElementById("stream-streamgh").value }
    ],

    download_servers: [
      { name: "Filemoon DL", url: document.getElementById("dl-filemoon").value },
      { name: "StreamGH DL", url: document.getElementById("dl-streamgh").value }
    ]
  });

  alert("Episode added!");
}

/* ---------------------------
   SAVE TO GITHUB (API READY)
----------------------------*/

function saveToGitHub() {
  alert("Your animeData.json is ready. Connect GitHub API to auto-update.");
}
</script>

</body>
  </html>
